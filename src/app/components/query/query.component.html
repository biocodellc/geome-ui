<section class="map-section">
    <div class="row">
        <div class="col-lg-12">
            <div class="top-tab-sec">
                <ul class="map-tbl mb-0">
                    <li class="down-btn"><button><i class="fa-solid fa-download"></i></button></li>
                    <li class="map-btn1"><button type="button" (click)="active = 'map'">Map</button></li>
                    <li class="map-btn1"><button type="button" (click)="active = 'table'">Table</button></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="p-0 ps-2" [ngClass]="isSidebarVisible ? 'col-lg-4' : 'col-0 overflow-hidden'">
            @if(teamQuery){
                <app-query-form (queryResult)="updateQueryResult($event, 'teamQueryForm')"/>
            }
            @else{
                <app-query-form (queryResult)="updateQueryResult($event, 'queryForm')"/>
            }
        </div>
        
        <div class="p-0 pe-2" [ngClass]="isSidebarVisible ? 'col-lg-8' : 'col-lg-12'">
            <div [ngClass]="active == 'map' ? '' : 'w-0 h-0 overflow-hidden'">
                <app-map />
            </div>
            <div class="custom-table-container" [ngClass]="active != 'map' ? '' : 'w-0 h-0 overflow-hidden'">
                @if(queryResult.length){
                    <p class="fw-bold">Total Number of Results: {{queryResult.length}}</p>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th scope="col">MaterialSampleID</th>
                                <th scope="col">EventID</th>
                                <th scope="col">Locality</th>
                                <th scope="col">DecimalLatitude</th>
                                <th scope="col">DecimalLongitude</th>
                                <th scope="col">YearCollected</th>
                                <th scope="col">Phylum</th>
                                <th scope="col">ScientificName</th>
                                <th scope="col">ExpeditionCode</th>
                                <th scope="col">Bcid</th>
                            </tr>
                        </thead>
                        <tbody>
                            @for (item of queryResult; track item) {
                                <tr>
                                    <td>{{ item.materialSampleID }}</td>
                                    <td>{{ item.eventID }}</td>
                                    <td>{{ item.locality }}</td>
                                    <td>{{ item.decimalLatitude }}</td>
                                    <td>{{ item.decimalLongitude }}</td>
                                    <td>{{ item.yearCollected }}</td>
                                    <td>{{ item.phylum }}</td>
                                    <td>{{ item.scientificName }}</td>
                                    <td>{{ item.expeditionCode }}</td>
                                    <td>{{ item.eventBcid }}</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                }
                @else{
                    <div class="d-flex justify-content-center">
                        <p>Click <span class="fw-semibold">Search</span> on sidebar to display query results</p>
                    </div>
                }
            </div>
        </div>



    </div>
</section>